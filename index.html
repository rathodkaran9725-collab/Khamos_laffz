<script>
    const API_KEY = 'AIzaSyDqbK8AkArxLwUZn_561nTqCHoIYvTaclQ'; // Aapki active key
    const CHANNEL_ID = 'UCf8x1h6eR6M_o6Y8H9fX9fA';

    async function getYTData() {
        try {
            // Stats fetch karne ke liye
            const statsUrl = `https://www.googleapis.com/youtube/v3/channels?part=statistics&id=${CHANNEL_ID}&key=${API_KEY}`;
            const sRes = await fetch(statsUrl);
            const sData = await sRes.json();
            
            if (sData.items && sData.items.length > 0) {
                const s = sData.items[0].statistics;
                document.getElementById('sub-count').innerText = Number(s.subscriberCount).toLocaleString();
                document.getElementById('view-count').innerText = Number(s.viewCount).toLocaleString();
            }

            // Videos fetch karne ke liye (order=date taaki latest trending dikhein)
            const vUrl = `https://www.googleapis.com/youtube/v3/search?key=${API_KEY}&channelId=${CHANNEL_ID}&part=snippet,id&order=date&maxResults=6&type=video`;
            const vRes = await fetch(vUrl);
            const vData = await vRes.json();
            
            const container = document.getElementById('video-container');
            container.innerHTML = ''; 

            if (vData.items && vData.items.length > 0) {
                for (const item of vData.items) {
                    const videoId = item.id.videoId;
                    // Har video ke live likes/views ke liye
                    const dUrl = `https://www.googleapis.com/youtube/v3/videos?part=statistics&id=${videoId}&key=${API_KEY}`;
                    const dRes = await fetch(dUrl);
                    const dData = await dRes.json();
                    
                    let vStats = { likeCount: 0, commentCount: 0, viewCount: 0 };
                    if (dData.items && dData.items.length > 0) {
                        vStats = dData.items[0].statistics;
                    }

                    container.innerHTML += `
                        <div class="video-card">
                            <iframe src="https://www.youtube.com/embed/${videoId}" allowfullscreen></iframe>
                            <div class="video-info">
                                <span class="video-title">${item.snippet.title}</span>
                                <div class="live-stats">
                                    <span><i class="fas fa-thumbs-up"></i> ${Number(vStats.likeCount || 0).toLocaleString()}</span>
                                    <span><i class="fas fa-eye"></i> ${Number(vStats.viewCount || 0).toLocaleString()}</span>
                                </div>
                            </div>
                        </div>
                    `;
                }
            } else {
                container.innerHTML = "<p>Filhaal videos load nahi ho pa rahe hain.</p>";
            }
        } catch (e) { 
            console.error("YouTube Error:", e);
        }
    }
    getYTData();
</script>
